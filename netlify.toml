[build]
  command = "npm run build"
  publish = ".next"
  ignore = ".next/cache/**"

[build.environment]
  # Node.js and npm versions
  NODE_VERSION = "20.11.1"
  NPM_VERSION = "10.5.0"
  
  # Configure secrets scanning to ignore build cache, node_modules and environment files
  SECRETS_SCAN_OMIT_PATHS = ".next/cache/**,.netlify/**,node_modules/**,.env*"
  
  # Disable Next.js telemetry
  NEXT_TELEMETRY_DISABLED = "1"
  
  # Disable secrets scanning for specific keys that are meant to be in the build
  SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_*,SUPABASE_*,POSTGRES_*"

# Configure build plugins
[[plugins]]
  package = "@netlify/plugin-nextjs"
  # No inputs needed for this plugin

# Configure build settings
[build.processing]
  # Skip processing of certain directories
  skip_processing = true

# Configure build caching - disable to prevent caching sensitive data
[build.caching]
  enabled = false

[functions]
  # If you're using API routes, uncomment this
  # directory = ".next/functions"

# Development settings
[dev]
  command = "npm run dev"
  targetPort = 3000
  publish = ".next"
  port = 3000

# Explicitly disable secrets scanning for build output
[secrets]
  enabled = false
